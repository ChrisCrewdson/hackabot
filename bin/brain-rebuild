#!/usr/bin/env python

import os
import sys

from twisted.internet import reactor

def done(result):
    reactor.stop()

if __name__ == "__main__":
    # Assume this file is HB_ROOT/bin/hackabot
    root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    sys.path.append("%s/lib/python" % root)

    import hackabot
    from hackabot.plugins.brain import brain

    if len(sys.argv) != 3:
        sys.stderr.write("Usage: %s config.xml nickname" % sys.argv[0])
        sys.exit(1)

    hackabot.basic(sys.argv[1])
    deferred = brain.rebuild(sys.argv[2])
    deferred.addBoth(done)
    reactor.run()
